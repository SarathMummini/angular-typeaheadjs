/*!
 * angular-remote-typeaheadjs v0.1.2
 * https://github.com/borntorun/angular-remote-typeaheadjs
 * Copyright 2015 Jo√£o Carvalho <jmmtcarvalho@gmail.com>; Licensed MIT
 */

!function(){"use strict";function a(a){function b(b,c,d,e){function f(a,d,e){p.onselected(d),"true"===b.clearvalue&&c.typeahead("val","")}function g(a){var d={};d[b.key]=c.typeahead("val"),p.onclosed(d)}function h(a,b,c){p.oncursorchanged(b)}function i(){b.remote||n("Attribute [remote] was not defined."),b.datasource||(b.datasource="datasource",b.logonwarn&&m("Attribute [datasource] was not defined. Using default name:'datasource'"));var a=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace(b.key),queryTokenizer:Bloodhound.tokenizers.whitespace,limit:b.limit,remote:b.remote+"%QUERY"});a.initialize().then(function(){c.typeahead({minLength:b.minlensugestion,highlight:!0},{name:b.datasource,displayKey:b.key,source:a.ttAdapter()})})}function j(a,c,d){return(a&&k(a)?k(a()):!1)?function(b){a()(b)}:(b.logonwarn&&m("'"+c+"' is not defined or is not a function."),function(a){b.$emit(d,a)})}function k(a){return"[object Function]"==={}.toString.call(a)}function l(){for(var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".split(""),b=Math.floor(10*Math.random())+6,c="",d=0;b>d;d++)c+=a[Math.floor(Math.random()*a.length)];return"artjs-"+c}function m(b){a.warn(b+"([angular-remote-typeaheadjs]:id:"+o+")")}function n(b){a.error(b+"([angular-remote-typeaheadjs]:id:"+o+")")}var o=l(),p={onselected:j(b.onselected,"onselected","typeahead:selected"),onclosed:j(b.onclosed,"onclosed","typeahead:closed"),oncursorchanged:j(b.oncursorchanged,"oncursorchanged","typeahead:cursorchanged")};b.logonwarn="true"===(b.logonwarn||"false"),c.attr("id",o),b.minlensugestion=b.minlensugestion||3,b.key=b.key||"name",b.limit=b.limit||25,i(),b.cssdropdown&&(c[0].parentNode.lastChild.className+=" "+b.cssdropdown),c.on("typeahead:autocompleted",f),c.on("typeahead:selected",f),c.on("typeahead:closed",g),c.on("typeahead:cursorchanged",h),b.$on("$destroy",function(){c.typeahead("destroy")})}var c={restrict:"E",replace:!0,scope:{remote:"@",key:"@?",datasource:"@?",onselected:"&?",onclosed:"&?",oncursorchanged:"&?",clearvalue:"@?",minlensugestion:"@?",limit:"@?",placeholder:"@?",cssinput:"@?",cssdropdown:"@?",model:"=?",logonwarn:"@?"},template:function(){return'<input type="text" ng-model="model" placeholder="{{placeholder}}" class="typeahead {{cssinput}}"/>'},link:b};return c}angular.module("angularRemoteTypeaheadjs",[]).directive("angularRemoteTypeaheadjs",a),a.$inject=["$log"]}();
