/*!
 * angular-typeaheadjs v0.8.0
 * https://github.com/borntorun/angular-typeaheadjs
 * Copyright 2015 Jo√£o Carvalho <jmmtcarvalho@gmail.com>; Licensed MIT
 */

!function(){"use strict";function a(a,b){function c(c,f,g,q){function r(a,b,c,d){var e=a.$on(c,function(a,c){-1!==b.attr("class").indexOf("tt-input")&&(b.typeahead("val",c),d&&e())});return e}function s(a,b){b.forEach(function(b){var c=i(b.trigger)?b.trigger:t((b.trigger||b.event).replace("$",""));c!==angular.noop&&a.on(b.event.replace(/\$/g,"typeahead:"),z,c)})}function t(a){var b=c.$eval(c["angtyOn"+a]);return i(b)?function(){b.apply(null,[].slice.call(arguments))}:z.emitOnlyIfPresent===!1||g.$attr.hasOwnProperty("angtyOn"+a)?function(){var b=[].slice.call(arguments),d=arguments[0].target;b.push({id:d.id,name:d.name,value:d.value}),c.$emit("typeahead:"+a,b)}:angular.noop}function u(a,c,f,g){function i(){return q=d({highlight:null,hint:null,minLength:null,classNames:null},c),k(f)===!0?void s.resolve(m(a,q,f)):h(f)===!0?void s.reject("angty-ttdatasets must be an array."):n(c)===!1?void s.reject("One of attributes [remote|prefetch] is required."):(p=d({sufficient:null,remote:null,prefetch:null},c),p.remote&&(l(p.remote)&&(p.remote={url:p.remote}),p.remote.wildcard=p.remote.wildcard||"%QUERY"),p=angular.extend(p,{initialize:!1,identify:g&&g.identify?g.identify:function(a){return a[c.display]},sorter:g&&g.sorter?g.sorter:void 0,datumTokenizer:Bloodhound.tokenizers.obj.whitespace(c.display),queryTokenizer:Bloodhound.tokenizers.whitespace}),o=d({name:null,limit:null,display:null},c),o.source=r=new Bloodhound(p),void r.initialize().done(function(){s.resolve(m(a,q,o))}).fail(function(){s.reject("engine.initialize failed.")}))}function m(a,b,c){return a.typeahead(b,c)}function n(a){var b=h(a.remote)&&(e(a.remote)||j(a.remote)&&e(a.remote.url)),c=h(a.prefetch)&&e(a.prefetch);return c||b}var o,p,q,r,s=b.defer();return setTimeout(function(){i()},0),s.promise}var v,w,x,y,z,A;if(z=c.$eval(c.angtyOptions),v=c.$eval(c.angtyTtoptions),w=c.$eval(c.angtyTtdatasets),x=c.$eval(c.angtyBhfunctions),z=angular.extend(angular.copy(o),z||{}),y=angular.extend(z.useOwnDefaults?angular.copy(p):{},v||{}),0===(A=f.find(".typeahead")).length)return void(z.showLog&&m('No element with ".typeahead" found to apply.',g.id));var B=[],C=A.attr("id")||A.attr("name");C?(z.watchInitEvent===!0&&B.push(r(c.$parent,A,"angtty:init:"+C,!0)),z.watchSetValEvent===!0&&B.push(r(c.$parent,A,"angtty:setval:"+C,!1)),B.length>0&&c.$parent.$on("$destroy",function(){B.forEach(function(b){try{b&&b()}catch(c){a(c)}})})):z.showLog&&m('Input element has no "id" or "name" attribute.',g.id);var D=u(A,y,w,x);D.then(function(a){function b(){a.typeahead("val","")}var c=angular.copy(n);z.selectOnAutocomplete===!0?(c.push({event:"$autocomplete $select",trigger:"select"}),z.clear===!0&&c.push({event:"$autocomplete $select",trigger:b})):(c.push({event:"$select"}),z.clear===!0&&c.push({event:"$select",trigger:b})),s(a,c)})["catch"](function(a){z.showLog&&m(a,A[0].id)})}function d(a,b){var c={};for(var d in a)g(b[d])||(c[d]=b[d]);return c}function e(a){return l(a)&&!f(a)}function f(a){return/^\s*$/.test(a)}function g(a){return"undefined"==typeof a}function h(a){return"undefined"!=typeof a}function i(a){return"[object Function]"==={}.toString.call(a)}function j(a){return"object"==typeof a&&null!==a}function k(a){return"[object Array]"===Object.prototype.toString.call(a)}function l(a){return"string"==typeof a}function m(b,c){a.error(b+"([angular-typeaheadjs]:id:"+c+")")}var n=[{event:"$active"},{event:"$idle"},{event:"$open"},{event:"$close"},{event:"$change"},{event:"$render"},{event:"$autocomplete"},{event:"$cursorchange"},{event:"$asyncrequest"},{event:"$asynccancel"},{event:"$asyncreceive"}],o={useOwnDefaults:!0,selectOnAutocomplete:!1,clear:!1,emitOnlyIfPresent:!0,showLog:!1,watchInitEvent:!1,watchSetValEvent:!1},p={highlight:!0,hint:!0,minLength:3,display:"name",limit:10,sufficient:10},q={restrict:"ACE",scope:{angtyOptions:"@?",angtyTtoptions:"@?",angtyTtdatasets:"&?",angtyOnactive:"&?",angtyOnidle:"&?",angtyOnopen:"&?",angtyOnclose:"&?",angtyOnchange:"&?",angtyOnrender:"&?",angtyOnselect:"&?",angtyOnautocomplete:"&?",angtyOncursorchange:"&?",angtyOnasyncrequest:"&?",angtyOnasynccancel:"&?",angtyOnasyncreceive:"&?",ngModel:"=?",angtyBhfunctions:"&?"},link:c};return q}angular.module("angularTypeaheadjs",[]).constant("Q",Q).directive("angularTypeaheadjs",a),a.$inject=["$log","Q"]}();
