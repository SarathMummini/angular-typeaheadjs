/*!
 * angular-typeaheadjs v0.7.0
 * https://github.com/borntorun/angular-typeaheadjs
 * Copyright 2015 Jo√£o Carvalho <jmmtcarvalho@gmail.com>; Licensed MIT
 */

!function(){"use strict";function a(a,b){function c(a,c,f,g){function q(a,b){b.forEach(function(b){var c=i(b.trigger)?b.trigger:r((b.trigger||b.event).replace("$",""));c!==angular.noop&&a.on(b.event.replace(/\$/g,"typeahead:"),w,c)})}function r(b){var c=a.$eval(a["angtyOn"+b]);return i(c)?function(){c.apply(null,[].slice.call(arguments))}:w.emitOnlyIfPresent===!1||f.$attr.hasOwnProperty("angtyOn"+b)?function(){a.$emit("typeahead:"+b,[].slice.call(arguments))}:angular.noop}function s(a,c,f){function g(){return p=d({highlight:null,hint:null,minLength:null,classNames:null},c),k(f)===!0?void r.resolve(i(a,p,f)):h(f)===!0?void r.reject("angty-ttdatasets must be an array."):m(c)===!1?void r.reject("One of attributes [remote|prefetch] is required."):(o=d({sufficient:null,remote:null,prefetch:null},c),o.remote&&(l(o.remote)&&(o.remote={url:o.remote}),o.remote.wildcard=o.remote.wildcard||"%QUERY"),o=angular.extend(o,{initialize:!1,datumTokenizer:Bloodhound.tokenizers.obj.whitespace(c.display),queryTokenizer:Bloodhound.tokenizers.whitespace}),n=d({name:null,limit:null,display:null},c),n.source=q=new Bloodhound(o),void q.initialize().done(function(){r.resolve(i(a,p,n))}).fail(function(){r.reject("engine.initialize failed.")}))}function i(a,b,c){return a.typeahead(b,c)}function m(a){var b=h(a.remote)&&(e(a.remote)||j(a.remote)&&e(a.remote.url)),c=h(a.prefetch)&&e(a.prefetch);return c||b}var n,o,p,q,r=b.defer();return setTimeout(function(){g()},0),r.promise}var t,u,v,w,x;if(w=a.$eval(a.angtyOptions),t=a.$eval(a.angtyTtoptions),u=a.$eval(a.angtyTtdatasets),w=angular.extend(angular.copy(o),w||{}),v=angular.extend(w.useOwnDefaults?angular.copy(p):{},t||{}),0===(x=c.find(".typeahead")).length)return void(w.showLog&&m('No element with ".typeahead" found to apply.',f.id));var y=s(x,v,u);y.then(function(a){function b(){a.typeahead("val","")}var c=angular.copy(n);w.selectOnAutocomplete===!0?(c.push({event:"$autocomplete $select",trigger:"select"}),w.clear===!0&&c.push({event:"$autocomplete $select",trigger:b})):(c.push({event:"$select"}),w.clear===!0&&c.push({event:"$select",trigger:b})),q(a,c)})["catch"](function(a){w.showLog&&m(a,x[0].id)})}function d(a,b){var c={};for(var d in a)g(b[d])||(c[d]=b[d]);return c}function e(a){return l(a)&&!f(a)}function f(a){return/^\s*$/.test(a)}function g(a){return"undefined"==typeof a}function h(a){return"undefined"!=typeof a}function i(a){return"[object Function]"==={}.toString.call(a)}function j(a){return"object"==typeof a&&null!==a}function k(a){return"[object Array]"===Object.prototype.toString.call(a)}function l(a){return"string"==typeof a}function m(b,c){a.error(b+"([angular-typeaheadjs]:id:"+c+")")}var n=[{event:"$active"},{event:"$idle"},{event:"$open"},{event:"$close"},{event:"$change"},{event:"$render"},{event:"$autocomplete"},{event:"$cursorchange"},{event:"$asyncrequest"},{event:"$asynccancel"},{event:"$asyncreceive"}],o={useOwnDefaults:!0,selectOnAutocomplete:!1,clear:!1,emitOnlyIfPresent:!0,showLog:!1},p={highlight:!0,hint:!0,minLength:3,display:"name",limit:10,sufficient:10},q={restrict:"E",scope:{angtyOptions:"@?",angtyTtoptions:"@?",angtyTtdatasets:"&?",angtyOnactive:"&?",angtyOnidle:"&?",angtyOnopen:"&?",angtyOnclose:"&?",angtyOnchange:"&?",angtyOnrender:"&?",angtyOnselect:"&?",angtyOnautocomplete:"&?",angtyOncursorchange:"&?",angtyOnasyncrequest:"&?",angtyOnasynccancel:"&?",angtyOnasyncreceive:"&?",ngModel:"=?"},link:c};return q}angular.module("angularTypeaheadjs",[]).constant("Q",Q).directive("angularTypeaheadjs",a),a.$inject=["$log","Q"]}();
