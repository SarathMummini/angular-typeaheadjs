<!DOCTYPE html>
<html>
<head>
    <title></title>
    <script src="../../bower_components/jquery/dist/jquery.min.js"></script>
    <script src="../../bower_components/angular/angular.min.js"></script>
    <script src="../../bower_components/typeahead.js/dist/typeahead.bundle.min.js"></script>
    <script src="../../src/angular-typeaheadjs.js"></script>

    <style>
        .container1,
        .container2,
        .container3 {
            margin: 75px auto;
        }
        .typeahead-wrapper {
            display: block;
            margin: 50px 0;
        }
        .tt-dropdown-menu {
            background-color: #ccc;
            border: 1px solid #000;
        }
        .tt-suggestion.tt-cursor {
            background-color: #fff;
            color: #000;
        }
    </style>
</head>

<body ng-app="myApp">

    <div class="container1" ng-controller="FilterCtrl1 as vm">
        <angular-typeaheadjs remote="{{vm.urlRemote}}" prefetch="{{vm.prefetch}}"
            placeholder="type lit"
            datasource="categories"
            onselected="vm.onSelected"
            onclosed="vm.onClosed"
            oncursorchanged="vm.onCursorChanged"
            clearvalue="false"
            limit="3"></angular-typeaheadjs>
        <br/>
        <br/>
        Selection: <input id="itemonSelected1" ng-model="vm.itemonSelected"/>
        On Close: <input id="itemonClosed1" ng-model="vm.itemonClosed"/>
        On Cursor Changed: <input id="itemonCursorChanged1" ng-model="vm.itemonCursorChanged"/>
    </div>
    <div class="container2" ng-controller="FilterCtrl2 as vm">
        <angular-typeaheadjs remote="{{vm.urlRemote}}" clearvalue="false"></angular-typeaheadjs>
        <br/>
        <br/>
        Selection: <input id="itemonSelected2" ng-model="vm.itemonSelected"/>
        On Close: <input id="itemonClosed2" ng-model="vm.itemonClosed"/>
        On Cursor Changed: <input id="itemonCursorChanged2" ng-model="vm.itemonCursorChanged"/>
    </div>
    <div class="container3" ng-controller="FilterCtrl3 as vm">
        <angular-typeaheadjs remote="{{vm.urlRemote}}" clearvalue="true"></angular-typeaheadjs>
        <br/>
        <br/>
        Selection: <input id="itemonSelected3" ng-model="vm.itemonSelected"/>
    </div>
    <div class="container4" ng-controller="FilterCtrl4 as vm">
        <angular-typeaheadjs remote="{{vm.urlRemote}}" model="vm.categorie" clearvalue="false"></angular-typeaheadjs>
        &nbsp;&nbsp;Model: <input id="inputbound4" ng-model="vm.categorie"/>
    </div>
<script>

(function() {
    'use strict';

    angular.module('myApp', ['angularTypeaheadjs'])
        .controller('FilterCtrl1', [ '$scope', FilterCtrl1 ])
        .controller('FilterCtrl2', [ '$scope', FilterCtrl2 ])
        .controller('FilterCtrl3', [ '$scope', FilterCtrl3 ])
        .controller('FilterCtrl4', [ '$scope', FilterCtrl4 ]);

    function FilterCtrl1($scope) {
        var vm = this;
        vm.itemonSelected = '';
        vm.itemonClosed = '';
        vm.itemonCursorChanged = '';
        vm.prefetch = '/tests/integration/data.json'
        vm.urlRemote = '/tests/integration/%QUERY.json';
        vm.onSelected = function (item) {
            vm.itemonSelected = 'selected:' + item.name;
            //$scope.$apply();
        };
        vm.onClosed = function(item) {
            vm.itemonClosed = 'closed:' + item.name;
            //$scope.$apply();
        };
        vm.onCursorChanged = function(item) {
            vm.itemonCursorChanged = 'cursorchanged:' + item.name;
            //$scope.$apply();
        };
    }
    function FilterCtrl2($scope) {
        var vm = this;
        vm.itemonSelected = '';
        vm.itemonClosed = '';
        vm.itemonCursorChanged = '';
        vm.prefetch = '/tests/integration/data.json'
        vm.urlRemote = '/tests/integration/%QUERY.json';

        $scope.$on('typeahead:selected', function(event, data) {
            vm.itemonSelected = 'selected:' + data.name;
            //$scope.$apply();
        });
        $scope.$on('typeahead:autocompleted', function(event, data) {
            vm.itemonSelected = 'autocompleted:' + data.name;
            //$scope.$apply();
        });
        $scope.$on('typeahead:closed', function(event, data) {
            vm.itemonClosed = 'closed:' + data.name;
            //$scope.$apply();
        });
        $scope.$on('typeahead:cursorchanged', function(event, data) {
            vm.itemonCursorChanged = 'cursorchanged:' + data.name;
            //$scope.$apply();
        });

    }
    function FilterCtrl3($scope) {
        var vm = this;
        vm.itemonSelected = '';
        vm.prefetch = '/tests/integration/data.json'
        vm.urlRemote = '/tests/integration/%QUERY.json';

        $scope.$on('typeahead:selected', function(event, data) {
            vm.itemonSelected = 'selected:' + data.name;
            //$scope.$apply();
        });
    }
    function FilterCtrl4($scope) {
        var vm = this;
        vm.categorie = '';
        vm.prefetch = '/tests/integration/data.json'
        vm.urlRemote = '/tests/integration/%QUERY.json';
    }
}());

</script>
</body>
</html>
