<!DOCTYPE html>
<html>
<head>
    <title>Test e2e angular-typeaheadjs</title>
    <style>
        .usecase1,
        .usecase2,
        .usecase3,
        .usecase4,
        .usecase5 {
            margin: 25px auto;
        }

        /* typeahead.js styles*/

        .typeahead,
        .tt-query,
        .tt-hint {
            width: 396px;
            height: 30px;
            padding: 8px 12px;
            font-size: 24px;
            line-height: 30px;
            border: 2px solid #ccc;
            -webkit-border-radius: 8px;
            -moz-border-radius: 8px;
            border-radius: 8px;
            outline: none;
        }

        .typeahead {
            background-color: #fff;
        }

        .typeahead:focus {
            border: 2px solid #0097cf;
        }

        .tt-query {
            -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
            -moz-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
            box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
        }

        .tt-hint {
            color: #999
        }

        .tt-menu {
            width: 422px;
            margin: 12px 0;
            padding: 8px 0;
            background-color: #fff;
            border: 1px solid #ccc;
            border: 1px solid rgba(0, 0, 0, 0.2);
            -webkit-border-radius: 8px;
            -moz-border-radius: 8px;
            border-radius: 8px;
            -webkit-box-shadow: 0 5px 10px rgba(0,0,0,.2);
            -moz-box-shadow: 0 5px 10px rgba(0,0,0,.2);
            box-shadow: 0 5px 10px rgba(0,0,0,.2);
        }

        .tt-suggestion {
            padding: 3px 20px;
            font-size: 18px;
            line-height: 24px;
        }

        .tt-suggestion:hover {
            cursor: pointer;
            color: #fff;
            background-color: #0097cf;
        }

        .tt-suggestion.tt-cursor {
            color: #fff;
            background-color: #0097cf;

        }

        .tt-suggestion p {
            margin: 0;
        }

    </style>
</head>

<body ng-app="myApp">


<div class="usecase1" ng-controller="UseCase1Controller as vm">
    Use case 1: [prefetch / remote / no options]:<br/>

    <angular-typeaheadjs angty-ttoptions="{{vm.ttOptions}}">
        <input class="typeahead" type="text" id="usecase1"/>
    </angular-typeaheadjs>

</div>
<div class="usecase2" ng-controller="UseCase2Controller as vm">
    Use case 2: [prefetch / remote / trigger all events on scope]:<br/>

    <angular-typeaheadjs angty-ttoptions="{{vm.ttOptions}}" angty-options="{{vm.options}}">
        <input class="typeahead" type="text" id="usecase2"/>
    </angular-typeaheadjs>

    <div class="trigger">{{vm.events.trigger}}</div>

</div>
<div class="usecase3" ng-controller="UseCase3Controller as vm">
    Use case 3: [prefetch / remote / emitOnlyIfPresent]:<br/>

    <angular-typeaheadjs angty-ttoptions="{{vm.ttOptions}}" angty-options="{{vm.options}}"  angty-onselect angty-onautocomplete>
        <input class="typeahead" type="text" id="usecase3"/>
    </angular-typeaheadjs>

    <div class="trigger">{{vm.events.trigger}}</div>

</div>
<div class="usecase4" ng-controller="UseCase4Controller as vm">
    Use case 4: [prefetch / remote / selectOnAutocomplete=true / clear=true]:<br/>

    <angular-typeaheadjs angty-ttoptions="{{vm.ttOptions}}" angty-options="{{vm.options}}"  angty-onselect angty-onautocomplete>
        <input class="typeahead" type="text" id="usecase4"/>
    </angular-typeaheadjs>

    <div class="trigger">{{vm.events.trigger}}</div>

</div>


<input id="dummy" type="text" style="border:0px;"/>


<script src="../../bower_components/jquery/dist/jquery.min.js"></script>
<script src="../../bower_components/angular/angular.min.js"></script>
<script src="../../bower_components/typeahead.js-v0.11.0/dist/typeahead.bundle.js"></script>
<script src="../../src/angular-typeaheadjs.js"></script>
<script>

    (function () {
        'use strict';
        angular.module('myApp', ['angularTypeaheadjs'])
                .controller('UseCase1Controller', [ '$scope', UseCase1Controller ])
                .controller('UseCase2Controller', [ '$scope', UseCase2Controller ])
                .controller('UseCase3Controller', [ '$scope', UseCase3Controller ])
                .controller('UseCase4Controller', [ '$scope', UseCase4Controller ]);

        function UseCase1Controller($scope) {
            var vm = this;
            vm.ttOptions = {
                prefetch:'/tests/local/prefetch.json',
                remote:'/tests/local/%QUERY.json'
            };
//            vm.options = {
//            };
        }
        function UseCase2Controller($scope) {
            var vm = this;
            vm.ttOptions = {
                prefetch:'/tests/local/prefetch.json',
                remote:'/tests/local/%QUERY.json'
            };
            vm.options = {
                emitOnlyIfPresent: false
            };
            vm.events = {
                names: ['active', 'idle', 'open', 'close', 'change', 'render', 'select', 'autocomplete', 'cursorchange', 'asyncrequest', 'asynccancel', 'asyncreceive'],
                trigger: [0,0,0,0,0,0,0,0,0,0,0,0]
            };

            vm.events.names.forEach(function(item, index){
                //console.log(item, index);
                $scope.$on('typeahead:' + item, function(){
                    //console.log(index,item,[].slice.call(arguments));
                    $scope.$apply(function(){
                        //console.log(vm.events.trigger[index]);
                        vm.events.trigger[index] = vm.events.trigger[index] + 1;
                        console.log(item,index,vm.events.trigger);
                    });

                });
            });
        }
        function UseCase3Controller($scope) {
            var vm = this;
            vm.ttOptions = {
                prefetch:'/tests/local/prefetch.json',
                remote:'/tests/local/%QUERY.json'
            };
            vm.options = {
                clear: false
            };
            vm.events = {
                names: ['active', 'idle', 'open', 'close', 'change', 'render', 'select', 'autocomplete', 'cursorchange', 'asyncrequest', 'asynccancel', 'asyncreceive'],
                trigger: [0,0,0,0,0,0,0,0,0,0,0,0]
            };
            vm.events.names.forEach(function(item, index){
                //console.log(item, index);
                $scope.$on('typeahead:' + item, function(){
                    //console.log(index,item,[].slice.call(arguments));
                    $scope.$apply(function(){
                        //console.log(vm.events.trigger[index]);
                        vm.events.trigger[index] = vm.events.trigger[index] + 1;
                        //console.log(item,vm.events.trigger);
                    });

                });
            });
        }
        function UseCase4Controller($scope) {
            var vm = this;
            vm.ttOptions = {
                prefetch:'/tests/local/prefetch.json',
                remote:'/tests/local/%QUERY.json'
            };

            vm.options = {
                clear: true,
                selectOnAutocomplete: true
            };
            vm.events = {
                names: ['active', 'idle', 'open', 'close', 'change', 'render', 'select', 'autocomplete', 'cursorchange', 'asyncrequest', 'asynccancel', 'asyncreceive'],
                trigger: [0,0,0,0,0,0,0,0,0,0,0,0]
            };
            vm.events.names.forEach(function(item, index){
                //console.log(item, index);
                $scope.$on('typeahead:' + item, function(ev, o){
                    //console.log(item, o, [].slice.call(arguments));
                    $scope.$apply(function(){
                        //console.log(vm.events.trigger[index]);
                        vm.events.trigger[index] = vm.events.trigger[index] + 1;
                    });

                });
            });
        }
        /*function FilterCtrl2($scope) {
            var vm = this;
            vm.options = {
                useOwnDefaults: false,
                clear:false
            };

            var nbaTeams = new Bloodhound({
                datumTokenizer: Bloodhound.tokenizers.obj.whitespace('team'),
                queryTokenizer: Bloodhound.tokenizers.whitespace,
                local: [{ "team": "Boston Celtics" },{ "team": "Dallas Mavericks" },{ "team": "Brooklyn Nets" },{ "team": "Houston Rockets" },{ "team": "New York Knicks" },{ "team": "Memphis Grizzlies" },{ "team": "Philadelphia 76ers" },{ "team": "New Orleans Hornets" },{ "team": "Toronto Raptors" },{ "team": "San Antonio Spurs" },{ "team": "Chicago Bulls" },{ "team": "Denver Nuggets" },{ "team": "Cleveland Cavaliers" },{ "team": "Minnesota Timberwolves" },{ "team": "Detroit Pistons" },{ "team": "Portland Trail Blazers" },{ "team": "Indiana Pacers" },{ "team": "Oklahoma City Thunder" },{ "team": "Milwaukee Bucks" },{ "team": "Utah Jazz" },{ "team": "Atlanta Hawks" },{ "team": "Golden State Warriors" },{ "team": "Charlotte Bobcats" },{ "team": "Los Angeles Clippers" },{ "team": "Miami Heat" },{ "team": "Los Angeles Lakers" },{ "team": "Orlando Magic" },{ "team": "Phoenix Suns" },{ "team": "Washington Wizards" },{ "team": "Sacramento Kings" }]
                //prefetch: '/temp/nba.json'
            });

            var nhlTeams = new Bloodhound({
                datumTokenizer: Bloodhound.tokenizers.obj.whitespace('team'),
                queryTokenizer: Bloodhound.tokenizers.whitespace,
                local: [{ "team": "New Jersey Devils" },{ "team": "New York Islanders" },{ "team": "New York Rangers" },{ "team": "Philadelphia Flyers" },{ "team": "Pittsburgh Penguins" },{ "team": "Chicago Blackhawks" },{ "team": "Columbus Blue Jackets" },{ "team": "Detroit Red Wings" },{ "team": "Nashville Predators" },{ "team": "St. Louis Blues" },{ "team": "Boston Bruins" },{ "team": "Buffalo Sabres" },{ "team": "Montreal Canadiens" },{ "team": "Ottawa Senators" },{ "team": "Toronto Maple Leafs" },{ "team": "Calgary Flames" },{ "team": "Colorado Avalanche" },{ "team": "Edmonton Oilers" },{ "team": "Minnesota Wild" },{ "team": "Vancouver Canucks" },{ "team": "Carolina Hurricanes" },{ "team": "Florida Panthers" },{ "team": "Tampa Bay Lightning" },{ "team": "Washington Capitals" },{ "team": "Winnipeg Jets" },{ "team": "Anaheim Ducks" },{ "team": "Dallas Stars" },{ "team": "Los Angeles Kings" },{ "team": "Phoenix Coyotes" },{ "team": "San Jose Sharks" }]
                //prefetch: '/temp/nhl.json'
            });
            vm.ttOptions = {
                minLength: 1,
                highlight: true,
                hint: true
            };
            vm.ttDatasets = [
                {
                    name: 'nba-teams',
                    display: 'team',
                    source: nbaTeams,
                    templates: {header: '<h3 class="league-name">NBA Teams</h3>'}
                },
                {
                    name: 'nhl-teams',
                    display: 'team',
                    source: nhlTeams,
                    templates: {header: '<h3 class="league-name">NHL Teams</h3>'}
                }
            ];
        }
        function FilterCtrl3($scope) {
            var vm = this;


            vm.options = {
                useOwnDefaults: true,
                emitOnlyIfPresent: true,
                selectOnAutocomplete: false,
                showLog: true
            };
            vm.ttOptions = {
                minLength: 2,
                prefetch: '/tests/integration/countries.json',
                remote:'/temp/%QUERY.json',
                limit:10
            };


            $scope.$on('typeahead:active', function(){
                console.log('active',[].slice.call(arguments));
            });
            $scope.$on('typeahead:idle', function(){
                console.log('idle',[].slice.call(arguments));
            });
            $scope.$on('typeahead:open', function(){
                console.log('open',[].slice.call(arguments));
            });
            $scope.$on('typeahead:close', function(){
                console.log('close',[].slice.call(arguments));
            });
            $scope.$on('typeahead:change', function(){
                console.log('change',[].slice.call(arguments));
            });
            $scope.$on('typeahead:render', function(){
                console.log('render',[].slice.call(arguments));
            });
            $scope.$on('typeahead:select', function(){
                console.log('select',[].slice.call(arguments));
            });
            $scope.$on('typeahead:autocomplete', function(){
                console.log('autocomplete',[].slice.call(arguments));
            });
            $scope.$on('typeahead:cursorchange', function(){
                console.log('cursorchange',[].slice.call(arguments));
            });
            $scope.$on('typeahead:asyncrequest', function(){
                console.log('asyncrequest',[].slice.call(arguments));
            });
            $scope.$on('typeahead:asynccancel', function(){
                console.log('asynccancel',[].slice.call(arguments));
            });
            $scope.$on('typeahead:asyncreceive', function(){
                console.log('asyncreceive',[].slice.call(arguments));
            });




            vm.oncursorchanged = function() {
                console.log([].slice.call(arguments));
            }

        }*/
    }());

</script>
</body>
</html>
